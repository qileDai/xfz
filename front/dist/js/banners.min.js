function Bannners(){}Bannners.prototype.run=function(){this.listAddBannersEvent(),this.loadData()},Bannners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banners_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItm(t)}}})},Bannners.prototype.listAddBannersEvent=function(){var n=this;$("#add-banners").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.createBannerItm()})},Bannners.prototype.createBannerItm=function(n){var e=this,a=template("banner-list-item",{banner:n}),t=$(".banner-list-group");if(n){t.append(a);var r=t.find(".banner-item:last")}else{t.prepend(a);r=t.find(".banner-item:first")}e.listImageSelectEvent(r),e.listCloseBannerEvent(r),e.addSaveBannersEvent(r)},Bannners.prototype.listImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Bannners.prototype.listCloseBannerEvent=function(e){var n=e.find("#close-banner-item"),a=e.attr("data-banner-id");n.click(function(){a?xfzalert.alertConfirm({text:"您确认要删除轮播图吗？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:a},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功！"))}})}}):e.remove()})},Bannners.prototype.addSaveBannersEvent=function(a){var n=$("#save-banners"),e=a.find(".thumbnail"),t=a.find("input[name='priority']"),r=a.find("input[name='link-to']"),i=a.find("span[class='priority']"),s=a.attr("data-banner-id"),o="";o=s?"/cms/edit_banner/":"/cms/add_banners/",n.click(function(){image_url=e.attr("src"),priority=t.val(),link_to=r.val(),xfzajax.post({url:o,data:{image_url:image_url,priority:priority,link_to:link_to,pk:s},success:function(n){if(200===n.code){if(s)window.messageBox.showSuccess("轮播图修改成功！");else{var e=n.data.banner_id;a.attr("data-banner-id",e),window.messageBox.showSuccess("轮播图添加成功")}i.text("优先级:"+priority)}}})})},$(function(){(new Bannners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubm5lcnMiLCJwcm90b3R5cGUiLCJydW4iLCJ0aGlzIiwibGlzdEFkZEJhbm5lcnNFdmVudCIsImxvYWREYXRhIiwic2VsZiIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwiYmFubmVycyIsImkiLCJsZW5ndGgiLCJiYW5uZXIiLCJjcmVhdGVCYW5uZXJJdG0iLCIkIiwiY2xpY2siLCJjaGlsZHJlbiIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyR3JvdXAiLCJhcHBlbmQiLCJiYW5uZXJpdGVtIiwiZmluZCIsInByZXBlbmQiLCJsaXN0SW1hZ2VTZWxlY3RFdmVudCIsImxpc3RDbG9zZUJhbm5lckV2ZW50IiwiYWRkU2F2ZUJhbm5lcnNFdmVudCIsImltYWdlIiwiaW1hZ2VJbnB1dCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJwb3N0IiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJhdHRyIiwiY2xvc2VCdG4iLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsInJlbW92ZSIsInNob3dTdWNjZXNzIiwic2F2ZUJ0biIsImltYWdlVGFnIiwicHJpb3JpdHlUYWciLCJsaW5rVG9UYWciLCJwcmlvcml0eUJ5VGFnIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJiYW5uZXJQayJdLCJtYXBwaW5ncyI6IkFBSUEsU0FBU0EsWUFJVEEsU0FBU0MsVUFBVUMsSUFBTSxXQUNWQyxLQUNOQyxzQkFETUQsS0FFTkUsWUFHVEwsU0FBU0MsVUFBVUksU0FBVyxXQUMxQixJQUFJQyxFQUFPSCxLQUNYSSxRQUFRQyxJQUFJLENBQ1JDLElBQU8scUJBQ1BDLFFB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QixLQUFLLGlCQUFpQm9CLEdBQ2pDNUMsT0FBT0MsV0FBV2dDLFlBQVksV0FFbENLLEVBQWNULEtBQUssT0FBU1csaUJBVWhEM0MsRUFBRSxZQUNnQixJQUFJakIsVUFDVkUiLCJmaWxlIjoiYmFubmVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTkvMy8yMS5cclxuICovXHJcblxyXG5mdW5jdGlvbiBCYW5ubmVycygpIHtcclxuXHJcbn07XHJcblxyXG5CYW5ubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0QWRkQmFubmVyc0V2ZW50KCk7XHJcbiAgICBzZWxmLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG5CYW5ubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6ICcvY21zL2Jhbm5lcnNfbGlzdC8nLFxyXG4gICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRtKGJhbm5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbn07XHJcblxyXG5CYW5ubmVycy5wcm90b3R5cGUubGlzdEFkZEJhbm5lcnNFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhZGRfYmFubmVycyA9ICQoJyNhZGQtYmFubmVycycpO1xyXG5cclxuICAgIGFkZF9iYW5uZXJzLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJCgnLmJhbm5lci1saXN0LWdyb3VwJyk7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IGJhbm5lckxpc3RHcm91cC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICBpZihsZW5ndGg+PTYpe1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbyhcIuacgOWkmuWPquiDvea3u+WKoDblvKDova7mkq3lm77vvIFcIilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0bSgpO1xyXG5cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0bSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1saXN0LWl0ZW1cIiwge1wiYmFubmVyXCI6IGJhbm5lcn0pXHJcbiAgICB2YXIgYmFubmVyR3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcclxuICAgIGlmIChiYW5uZXIpIHtcclxuICAgICAgICBiYW5uZXJHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICB2YXIgYmFubmVyaXRlbSA9IGJhbm5lckdyb3VwLmZpbmQoJy5iYW5uZXItaXRlbTpsYXN0JylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmFubmVyR3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIHZhciBiYW5uZXJpdGVtID0gYmFubmVyR3JvdXAuZmluZCgnLmJhbm5lci1pdGVtOmZpcnN0JylcclxuICAgIH1cclxuICAgIHNlbGYubGlzdEltYWdlU2VsZWN0RXZlbnQoYmFubmVyaXRlbSk7XHJcbiAgICBzZWxmLmxpc3RDbG9zZUJhbm5lckV2ZW50KGJhbm5lcml0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyc0V2ZW50KGJhbm5lcml0ZW0pO1xyXG59O1xyXG5cclxuQmFubm5lcnMucHJvdG90eXBlLmxpc3RJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lcml0ZW0pIHtcclxuICAgIHZhciBpbWFnZSA9IGJhbm5lcml0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJpdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpO1xyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSlcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG59O1xyXG5CYW5ubmVycy5wcm90b3R5cGUubGlzdENsb3NlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVyaXRlbSkge1xyXG4gICAgdmFyIGNsb3NlQnRuID0gYmFubmVyaXRlbS5maW5kKCcjY2xvc2UtYmFubmVyLWl0ZW0nKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lcml0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiBcIuaCqOehruiupOimgeWIoOmZpOi9ruaSreWbvuWQl++8n1wiLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyaXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvuWIoOmZpOaIkOWKn++8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbm5lcml0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5ubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lcnNFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJpdGVtKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2F2ZUJ0biA9ICQoJyNzYXZlLWJhbm5lcnMnKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lcml0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVyaXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rVG9UYWcgPSBiYW5uZXJpdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rLXRvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlCeVRhZyA9IGJhbm5lcml0ZW0uZmluZChcInNwYW5bY2xhc3M9J3ByaW9yaXR5J11cIik7XHJcbiAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJpdGVtLmF0dHIoXCJkYXRhLWJhbm5lci1pZFwiKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXJzLyc7XHJcbiAgICB9XHJcbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZV91cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcclxuICAgICAgICBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xyXG4gICAgICAgIGxpbmtfdG8gPSBsaW5rVG9UYWcudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzogaW1hZ2VfdXJsLFxyXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICAnbGlua190byc6IGxpbmtfdG8sXHJcbiAgICAgICAgICAgICAgICAncGsnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi6L2u5pKt5Zu+5L+u5pS55oiQ5Yqf77yBXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXJQayA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVyaXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIixiYW5uZXJQaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLova7mkq3lm77mt7vliqDmiJDlip9cIilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlCeVRhZy50ZXh0KFwi5LyY5YWI57qnOlwiICsgcHJpb3JpdHkpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5uZXJzKCk7XHJcbiAgICBiYW5uZXJzLnJ1bigpO1xyXG59KTsiXX0=
