function News(){}News.prototype.run=function(){var e=this;e.listUploadFileEvent(),e.initEditor(),e.listSubmitNewsEvent()},News.prototype.listUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,contentType:!1,processData:!1,success:function(e){if(200===e.code){console.log(e.data);var t=e.data.url;console.log(t),$("#thumbnail-form").val(t)}}})})},News.prototype.initEditor=function(){window.ue=UE.getEditor("ueditor",{initialFrameHeight:200,serverUrl:"/ueditor/upload/"})},News.prototype.listenQiniuUploadFileEvent=function(){var l=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,n=(new Date).getTime()+"."+a.name.split(".")[1],o={fname:n,params:{},mimeType:["image/png","image/jpeg","image/gif","video/x-ms-wmv"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(a,n,t,o,i).subscribe({next:l.handleFileUploadProgress,error:l.handleFileUploadError,complete:l.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total,n=e.percent;console.log(n),console.log(t)},News.prototype.handleFileUploadError=function(e){console.log(e.message)},News.prototype.handleFileUploadComplete=function(e){console.log(e)},News.prototype.listSubmitNewsEvent=function(){$("#submitbtn").click(function(e){$(this);e.preventDefault();var t=$("input[name='title']").val(),n=$("select[name='categroy']").val(),o=$("input[name='desc']").val(),i=$("input[name='thumbnail']").val(),a=window.ue.getContent();xfzajax.post({url:"/cms/write_news/",data:{title:t,categroy:n,desc:o,thumbnail:i,content:a},success:function(e){200===e.code&&xfzalert.alertSuccess("恭喜！新闻发布成功",function(){window.location.reload()})}})})},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsInJ1biIsInNlbGYiLCJ0aGlzIiwibGlzdFVwbG9hZEZpbGVFdmVudCIsImluaXRFZGl0b3IiLCJsaXN0U3VibWl0TmV3c0V2ZW50IiwidXBsb2FkYnRuIiwiJCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRlIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJjb250ZW50VHlwZSIsInByb2Nlc3NEYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJ2YWwiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwibGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQiLCJnZXQiLCJ0b2tlbiIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInNwbGl0IiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJjb21wbGV0ZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwidG90YWwiLCJwZXJjZW50IiwibWVzc2FnZSIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRpdGxlIiwiY2F0ZWdyb3kiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsImdldENvbnRlbnQiLCJ4ZnphbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIl0sIm1hcHBpbmdzIjoiQUFJQSxTQUFTQSxRQUlUQSxLQUFLQyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLHNCQUVMRixFQUFLRyxhQUNMSCxFQUFLSSx1QkFHVFAsS0FBS0MsVUFBVUksb0JBQXNCLFdBQ2pDLElBQUlHLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEJDLFFBQVFDLElBQUlGLEVBQWEsTUFDekIsSUFBSUwsRUFBTUssRUFBYSxLQUFPLElBQzlCQyxRQUFRQyxJQUFJUCxHQUNJVCxFQUFFLG1CQUNSaUIsSUFBSVIsVUFTbENsQixLQUFLQyxVQUFVSyxXQUFhLFdBR3hCcUIsT0FBT0MsR0FBS0MsR0FBR0MsVUFBVSxVQUFXLENBQ2hDQyxtQkFBc0IsSUFDdEJDLFVBQWEsc0JBTXJCaEMsS0FBS0MsVUFBVWdDLDJCQUE2QixXQUN4QyxJQUFJOUIsRUFBT0MsS0FDS0ssRUFBRSxrQkFDUkMsT0FBTyxXQUNiLElBQUlDLEVBQU9QLEtBQUtRLE1BQU0sR0FDdEJJLFFBQVFrQixJQUFJLENBQ1JoQixJQUFPLGdCQUNQSSxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSVksRUFBUVosRUFBYSxLQUFTLE1BRzlCYSxHQUFNLElBQUtDLE1BQVFDLFVBQVksSUFBTTNCLEVBQUs0QixLQUFLQyxNQUFNLEtBQUssR0FDMURDLEVBQVcsQ0FDWEMsTUFBT04sRUFDUE8sT0FBUSxHQUNSQyxTQUFVLENBQUMsWUFBYSxhQUFjLFlBQWEsbUJBRW5EQyxFQUFTLENBQ1RDLGNBQWMsRUFDZEMsV0FBWSxFQUNaQyxPQUFRQyxNQUFNRCxPQUFPRSxJQUVSRCxNQUFNRSxPQUFPeEMsRUFBTXlCLEVBQUtELEVBQU9NLEVBQVVJLEdBQy9DTyxVQUFVLENBQ2pCQyxLQUFRbEQsRUFBS21ELHlCQUNiQyxNQUFTcEQsRUFBS3FELHNCQUNkQyxTQUFZdEQsRUFBS3VELGtDQVF6QzFELEtBQUtDLFVBQVVxRCx5QkFBMkIsU0FBVUssR0FDaEQsSUFBSUMsRUFBUUQsRUFBU0MsTUFDakJDLEVBQVVGLEVBQVNFLFFBQ3ZCckMsUUFBUUMsSUFBSW9DLEdBQ1pyQyxRQUFRQyxJQUFJbUMsSUFJaEI1RCxLQUFLQyxVQUFVdUQsc0JBQXdCLFNBQVVELEdBQzdDL0IsUUFBUUMsSUFBSThCLEVBQU1PLFVBSXRCOUQsS0FBS0MsVUFBVXlELHlCQUEyQixTQUFVQyxHQUNoRG5DLFFBQVFDLElBQUlrQyxJQUdoQjNELEtBQUtDLFVBQVVNLG9CQUFzQixXQUNqQkUsRUFBRSxjQUNSc0QsTUFBTSxTQUFVQyxHQUNadkQsRUFBRUwsTUFDWjRELEVBQU1DLGlCQUNOLElBQUlDLEVBQVF6RCxFQUFFLHVCQUF1QmlCLE1BQ2pDeUMsRUFBVzFELEVBQUUsMkJBQTJCaUIsTUFDeEMwQyxFQUFPM0QsRUFBRSxzQkFBc0JpQixNQUMvQjJDLEVBQVk1RCxFQUFFLDJCQUEyQmlCLE1BQ3pDNEMsRUFBVTNDLE9BQU9DLEdBQUcyQyxhQUN4QnZELFFBQVFDLEtBQUssQ0FDVEMsSUFBTSxtQkFDTkMsS0FBTyxDQUNIK0MsTUFBUUEsRUFDUkMsU0FBV0EsRUFDWEMsS0FBT0EsRUFDUEMsVUFBWUEsRUFDWkMsUUFBVUEsR0FFZGhELFFBQVUsU0FBVUMsR0FDSyxNQUFsQkEsRUFBYSxNQUNaaUQsU0FBU0MsYUFBYSxZQUFZLFdBQzlCOUMsT0FBTytDLFNBQVNDLGlCQVN4Q2xFLEVBQUUsWUFDYSxJQUFJVCxNQUNWRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFkbWluaXN0cmF0b3Igb24gMjAxOS8zLzE0LlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIE5ld3MoKSB7XHJcblxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0VXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICAvLyBzZWxmLmxpc3RlblFpbml1VXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICBzZWxmLmluaXRFZGl0b3IoKTtcclxuICAgIHNlbGYubGlzdFN1Ym1pdE5ld3NFdmVudCgpO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdFVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB1cGxvYWRidG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xyXG4gICAgdXBsb2FkYnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRidG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRlID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGUuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGUsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFsnZGF0YSddKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXJsKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWwgPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwudmFsKHVybClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmluaXRFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgLy8gdmFyIHVlID0gVUUuZ2V0RWRpdG9yKCd1ZWRpdG9yJyk7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ3VlZGl0b3InLCB7XHJcbiAgICAgICAgJ2luaXRpYWxGcmFtZUhlaWdodCc6IDIwMCxcclxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXHJcbiAgICB9KTtcclxuXHJcblxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9xbnRva2VuLycsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHRbJ2RhdGEnXVsndG9rZW4nXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhLmIuanBnID0gWydhJywnYicsJ2pwZyddXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMTk4ODg4ODg4ICsgLiArIGpwZyA9IDE5ODg4ODguanBnXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2dpZicsICd2aWRlby94LW1zLXdtdiddXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnowXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XHJcbiAgICB2YXIgcGVyY2VudCA9IHJlc3BvbnNlLnBlcmNlbnQ7XHJcbiAgICBjb25zb2xlLmxvZyhwZXJjZW50KVxyXG4gICAgY29uc29sZS5sb2codG90YWwpXHJcblxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKVxyXG5cclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UpXHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0U3VibWl0TmV3c0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdGJ0biA9ICQoJyNzdWJtaXRidG4nKTtcclxuICAgIHN1Ym1pdGJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRlZ3JveSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdyb3knXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvd3JpdGVfbmV3cy8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzp0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ3JveSc6Y2F0ZWdyb3ksXHJcbiAgICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOnRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjb250ZW50Jzpjb250ZW50LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09MjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoXCLmga3llpzvvIHmlrDpl7vlj5HluIPmiJDlip9cIixmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcbn0pOyJdfQ==
