function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scrool-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.listNavClickEvent()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.listNavClickEvent=function(){var t=window.location.href,n=window.location.protocol+"//"+window.location.host,a=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===a)return e.addClass("active"),!1})},$(function(){(new FrontBase).run()}),Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listSiginUpEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){console.log("dddd"),t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listCaptchaEvent=function(){var t=$(".image-captcha-btn");t.click(function(){t.attr("src","account/image_captcha?random="+Math.random())})},Auth.prototype.listenSigninEvent=function(){var s=this,t=$(".singin-group"),a=t.find("input[name='telephone']"),o=t.find("input[name='password']"),i=t.find("input[name='remeber']");t.find(".submit-btn").click(function(){var t=a.val(),n=o.val(),e=i.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200==t.code)s.hideEvent(),window.location.reload();else{var n=t.message;if("string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var a=n[e][0];window.messageBox.show(a)}}},fail:function(t){console.log(t)}})})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=10;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listSiginUpEvent=function(){var f=$(".singup-group");f.find(".submit-btn").click(function(t){console.log("点击成功"),event.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),s=f.find("input[name='password1']"),o=f.find("input[name='password2']"),i=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val(),l=s.val(),u=o.val(),h=i.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:l,password2:u,sms_captcha:h},success:function(t){console.log(t)}})})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".singup-group"),e=$(".sms-captcha-btn"),a=t.find("input[name='telephone']");console.log(e),e.click(function(){var t=a.val();console.log(t),t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run()}),$(function(){$(".switch").click(function(){var t=$(".scrool-wrapper"),n=t.css("left");(n=parseInt(n))<0?t.animate({left:"0"}):t.animate({left:"-400px"})})}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;if(a<60)return"刚刚";if(60<=a&&a<3600)return minutes=parseInt(a/60),minutes+"分钟前";if(3600<=a&&a<86400)return(c=parseInt(a/60/60))+"小时前";if(86400<=a&&a<2592e3)return days=parseInt(a/60/60/24),days+"天前";var s=n.getFullYear(),o=n.getMonth(),i=n.getDay(),c=n.getHours();return s+"/"+o+"/"+i+" "+c+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJsaXN0TmF2Q2xpY2tFdmVudCIsImF1dGhCb3giLCJ1c2VyTW9yZUJveCIsImhvdmVyIiwic2hvdyIsImhpZGUiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJkb21pbiIsInByb3RvY29sIiwiaG9zdCIsInBhdGgiLCJyZXBsYWNlIiwiZWFjaCIsImluZGV4IiwiZWxlbWVudCIsImxpIiwiY2hpbGRyZW4iLCJhdHRyIiwiYWRkQ2xhc3MiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJsaXN0U2lnaW5VcEV2ZW50Iiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50Iiwic2lnbmluQnRuIiwic2lnbnVwQnRuIiwiY2xvc2VCdG4iLCJjbGljayIsImNvbnNvbGUiLCJsb2ciLCJjc3MiLCJsZWZ0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJpbWFnZWNhcHRjaGEiLCJNYXRoIiwicmFuZG9tIiwic2lnbmluR3JvdXAiLCJ0ZWxlcGhvbmVJbnB1dCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwieGZ6YWpheCIsInBvc3QiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsInJlbG9hZCIsIm1lc3NhZ2VPYmplY3QiLCJjb25zdHJ1Y3RvciIsIlN0cmluZyIsIm1lc3NhZ2VCb3giLCJrZXkiLCJtZXNzYWdlIiwiZmFpbCIsImVycm9yIiwic21zU3VjY2Vzc0V2ZW50Iiwic2hvd1N1Y2Nlc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwic2lnaW51cEdyb3VwIiwiZXZuZXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidXNlcm5hbWVJbnB1dCIsImltZ0NhcHRjaGFJbnB1dCIsInBhc3N3b3JkMUlucHV0IiwicGFzc3dvcmQySW5wdXQiLCJzbXNDYXB0Y2hhSW5wdXQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJzaG93SW5mbyIsImdldCIsImN1cnJlbnRsZWZ0IiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRldmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBSUEsU0FBU0EsYUE4Q1QsU0FBU0MsT0FDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsRUFBS0ksY0FBZ0JELEVBQUUsbUJBQ3ZCSCxFQUFLSyxXQUFhRixFQUFFLG9CQS9DeEJMLFVBQVVRLFVBQVVDLElBQU0sV0FDWE4sS0FDTk8scUJBRE1QLEtBRU5RLHFCQUdUWCxVQUFVUSxVQUFVRSxtQkFBcUIsV0FDckMsSUFBSUUsRUFBVVAsRUFBRSxhQUNaUSxFQUFjUixFQUFFLGtCQUNwQk8sRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNiLFdBQ0NGLEVBQVlHLFVBSXBCaEIsVUFBVVEsVUFBVUcsa0JBQW9CLFdBQ3BDLElBQUlNLEVBQU1DLE9BQU9DLFNBQVNDLEtB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RUFBTyxJQUFNRSxFQUFRLElBQU1FLEVBQU0sSUFBTU4sRUFBUSxJQUR6Q04sRUFBS2UiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTkvMS8zLlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkF1dGhCb3hIb3ZlcigpO1xyXG4gICAgc2VsZi5saXN0TmF2Q2xpY2tFdmVudCgpO1xyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3ROYXZDbGlja0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xyXG4gICAgdmFyIGhvc3QgPSB3aW5kb3cubG9jYXRpb24uaG9zdDtcclxuICAgICB2YXIgZG9taW4gPSBwcm90b2NvbCArJy8vJyAraG9zdDtcclxuICAgIHZhciBwYXRoID0gdXJsLnJlcGxhY2UoZG9taW4sJycpO1xyXG4gICAgdmFyIG5hdkxpc3QgPSAkKCcubmF2IGxpJyk7XHJcbiAgICBuYXZMaXN0LmVhY2goZnVuY3Rpb24gKGluZGV4LGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBhVGFnID0gbGkuY2hpbGRyZW4oXCJhXCIpXHJcbiAgICAgICAgdmFyIGhyZWYgPSBhVGFnLmF0dHIoXCJocmVmXCIpO1xyXG4gICAgICAgIGlmKGhyZWYgPT09IHBhdGgpe1xyXG4gICAgICAgICAgICBsaS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRiYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICAgZnJvbnRiYXNlLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4vKiDlpITnkIbnmbvlvZXpl67popgqL1xyXG5cclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9vbC13cmFwcGVyXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhID0gJChcIi5zbXMtY2FwdGNoYS1idG5cIik7XHJcblxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3dpdGNoRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdENhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdFNpZ2luVXBFdmVudCgpO1xyXG5cclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XHJcbiAgICB2YXIgc2lnbnVwQnRuID0gJCgnLnNpZ251cC1idG4nKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuXHJcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGRkZFwiKVxyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6IDB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjogLTQwMH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XHJcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRMZWZ0IDwgMCkge1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6ICcwJ30pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogXCItNDAwcHhcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdENhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpbWFnZWNhcHRjaGEgPSAkKCcuaW1hZ2UtY2FwdGNoYS1idG4nKVxyXG4gICAgaW1hZ2VjYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZWNhcHRjaGEuYXR0cihcInNyY1wiLCBcImFjY291bnQvaW1hZ2VfY2FwdGNoYVwiICsgXCI/cmFuZG9tPVwiICsgTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKCcuc2luZ2luLWdyb3VwJyk7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwi5byA5aeL55m75b2VXCIrdGVsZXBob25lK3Bhc3N3b3JkK3JlbWVtYmVyKVxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlciA/IDEgOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSAnc3RyaW5nJyB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09IFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2VPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHtcInBhc3N3b3JkXCI6Wyflr4bnoIHmnIDlpKfplb/luqbkuI3og73otoXov4cyMOS4uu+8gScsJ3h4eCddLFwidGVsZXBob25lXCI6Wyd4eCcsJ3gnXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIG1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+efreS/oemqjOivgeeggeWPkemAgeaIkOWKn++8gScpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgdmFyIGNvdW50ID0gMTA7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEudW5iaW5kKCdjbGljaycpO1xyXG4gICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KGNvdW50ICsgJ3MnKTtcclxuICAgICAgICBjb3VudCAtPSAxO1xyXG4gICAgICAgIGlmIChjb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCAxMDAwKTtcclxufTtcclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0U2lnaW5VcEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNpZ2ludXBHcm91cCA9ICQoJy5zaW5ndXAtZ3JvdXAnKVxyXG5cclxuICAgIHZhciBzdWJtaW5CdG4gPSBzaWdpbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKVxyXG5cclxuICAgIHN1Ym1pbkJ0bi5jbGljayhmdW5jdGlvbiAoZXZuZXQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIueCueWHu+aIkOWKn1wiKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ2ludXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdpbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XHJcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ2ludXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdpbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ2ludXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ2ludXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcclxuXHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQyID0gcGFzc3dvcmQySW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3JlZ2lzdGVyLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWdpbnVwR3JvdXAgPSAkKCcuc2luZ3VwLWdyb3VwJylcclxuICAgIHZhciBzbXNDYXB0Y2hhID0gJChcIi5zbXMtY2FwdGNoYS1idG5cIik7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdpbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpXHJcbiAgICBjb25zb2xlLmxvZyhzbXNDYXB0Y2hhKVxyXG4gICAgc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRlbGVwaG9uZSlcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIui+k+WFpeaJi+acuuWlveWVilwiKVxyXG4gICAgICAgIGlmICghdGVsZXBob25lKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+egge+8gScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG59KTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgJChcIi5zd2l0Y2hcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzY3JvbGxXcmFwcGVyID0gJChcIi5zY3Jvb2wtd3JhcHBlclwiKTtcclxuICAgICAgICB2YXIgY3VycmVudGxlZnQgPSBzY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgY3VycmVudGxlZnQgPSBwYXJzZUludChjdXJyZW50bGVmdClcclxuICAgICAgICBpZiAoY3VycmVudGxlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgIHNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6ICcwJ30pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogJy00MDBweCd9KVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0pXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGV2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGV2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykgLyAxMDAwXHJcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwICogNjApIHtcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MClcclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsgJ+WIhumSn+WJjSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcclxuICAgICAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MClcclxuICAgICAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgKiAyNCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQgKiAzMCkge1xyXG4gICAgICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNClcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geWVhciArICcvJyArIG1vbnRoICsgJy8nICsgZGF5ICsgXCIgXCIgKyBob3VycyArIFwiOlwiICsgbWludXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KVxyXG5cclxuIl19
